<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Juego de Amor</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* --- ESTILOS VISUALES --- */
        :root {
            --primary: #ff4757;
            --secondary: #ff6b81;
            --bg: #2f3542;
        }

        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #2c3e50, #000000);
            font-family: 'Poppins', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
            user-select: none;
        }

        /* Fondo animado */
        .background-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .heart-bg {
            position: absolute;
            color: rgba(255, 107, 129, 0.3);
            animation: floatUp 10s linear infinite;
            font-size: 20px;
        }

        /* --- PANTALLA DE INICIO --- */
        #start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: transform 0.8s ease-in-out;
            text-align: center;
            padding: 20px;
        }

        h1.title {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            color: #ff4757;
            text-shadow: 0 0 15px #ff4757;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .btn {
            background: linear-gradient(45deg, #ff4757, #ff6b81);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(255, 71, 87, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
        }

        .btn:active {
            transform: scale(0.95);
        }

        /* --- TABLERO DE JUEGO --- */
        #game-container {
            position: relative;
            z-index: 10;
            display: none; /* Se activa con JS */
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 800px;
            padding: 20px;
        }

        .game-header {
            color: white;
            text-align: center;
            margin-bottom: 20px;
        }

        .score-board {
            font-size: 1.2rem;
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 20px;
            margin-bottom: 15px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            width: 100%;
            max-width: 600px;
            perspective: 1000px;
        }

        /* --- CARTAS --- */
        .card {
            background-color: transparent;
            aspect-ratio: 3/4; 
            cursor: pointer;
            position: relative;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card.matched .card-inner {
            transform: rotateY(180deg);
            box-shadow: 0 0 15px #00ff00; 
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* Parte trasera (Interrogación o Corazón) */
        .card-front {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
            color: #ff4757;
            font-size: 2rem;
            border: 2px solid #fff;
        }

        /* Parte delantera (La Foto) */
        .card-back {
            background-color: white;
            transform: rotateY(180deg);
            border: 2px solid #ff4757;
        }

        .card-back img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* --- PANTALLA DE VICTORIA --- */
        #win-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 200;
            text-align: center;
            opacity: 0;
            transition: opacity 1s;
        }

        #win-modal h2 {
            font-family: 'Dancing Script', cursive;
            font-size: 3rem;
            color: #fff;
            margin-bottom: 20px;
        }

        #win-modal p {
            color: #ddd;
            font-size: 1.2rem;
            max-width: 80%;
            margin-bottom: 30px;
        }

        /* Animaciones */
        @keyframes floatUp {
            0% { transform: translateY(100vh) scale(0.5); opacity: 1; }
            100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }
        }

        /* Efecto de escritura y cursor */
        #love-msg {
            white-space: pre-wrap;
            font-weight: 600;
            text-align: center;
            line-height: 1.3;
        }

        #love-msg .cursor {
            display: inline-block;
            width: 10px;
            margin-left: 6px;
            animation: blink 1s steps(2) infinite;
            color: #ffd6e0;
        }

        @keyframes blink {
            50% { opacity: 0; }
        }

        /* Responsive */
        @media (max-width: 500px) {
            .grid {
                gap: 5px;
                grid-template-columns: repeat(4, 1fr);
            }
            h1.title {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>

    <div class="background-hearts" id="bg-hearts"></div>

    <div id="start-screen">
        <h1 class="title">Hola changuita hermosa preciosa<br>❤️</h1>
        <p style="color:white; margin-bottom: 30px;">¿Lista para jugar?</p>
        <button class="btn" onclick="startGame()">¡Sí, Jugar!</button>
    </div>

    <div id="game-container">
        <div class="game-header">
            <div class="score-board">Intentos: <span id="moves">0</span> | Parejas: <span id="matches">0</span>/10</div>
        </div>
        <div class="grid" id="grid"></div>
    </div>

    <div id="win-modal">
        <h2>¡Ganaste mi Amor! ❤️</h2>
    <p>Eres la mejor jugadora y la mejor novia del mundo.</p>
    <!-- Mensaje de amor que se muestra al completar el juego -->
    <p id="love-msg" style="color:#ffd6e0; font-size:1.15rem; max-width:80%; margin-bottom:20px; display:none;"></p>
    <img src="img/Uno.jpeg" style="width: 150px; height: 150px; object-fit: cover; border-radius: 50%; border: 4px solid #ff4757; box-shadow: 0 0 20px #ff4757; margin-bottom: 20px;" alt="Nosotros">
        <button class="btn" onclick="location.reload()">Jugar otra vez</button>
    </div>

    <canvas id="confetti" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:150; display:none;"></canvas>

    <script>
        /* --- CONFIGURACIÓN DE NOMBRES --- */
        // Nombres simples como pediste
        // Usar los nombres reales de los archivos en la carpeta img/ (.jpeg en este proyecto)
        const images = [
            'Uno.jpeg',
            'Dos.jpeg',
            'Tres.jpeg',
            'Cuatro.jpeg',
            'Cinco .jpeg', // tiene un espacio en el nombre de archivo
            'Seis.jpeg',
            'Siete.jpeg',
            'Ocho.jpeg',
            'Nueve.jpeg',
            'Diez.jpeg'
        ];

        let cardsArray = [];
        let firstCard = null;
        let secondCard = null;
        let lockBoard = false;
        let matchesFound = 0;
        let moves = 0;

        function startGame() {
            document.getElementById('start-screen').style.transform = 'translateY(-100%)';
            document.getElementById('game-container').style.display = 'flex';
            initBoard();
            createFloatingHearts();
        }

        function initBoard() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            
            cardsArray = [...images, ...images]; 
            cardsArray.sort(() => 0.5 - Math.random());

            cardsArray.forEach(imgName => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.dataset.name = imgName;

                // Construimos los nodos DOM en lugar de usar innerHTML
                // y usamos encodeURIComponent para manejar espacios y caracteres especiales
                const inner = document.createElement('div');
                inner.className = 'card-inner';

                const front = document.createElement('div');
                front.className = 'card-front';
                front.innerHTML = '❤️';

                const back = document.createElement('div');
                back.className = 'card-back';

                const imgEl = document.createElement('img');
                imgEl.alt = 'Foto';
                imgEl.src = 'img/' + encodeURIComponent(imgName);

                back.appendChild(imgEl);
                inner.appendChild(front);
                inner.appendChild(back);
                card.appendChild(inner);

                card.addEventListener('click', flipCard);
                grid.appendChild(card);
            });
        }

        function flipCard() {
            if (lockBoard) return;
            if (this === firstCard) return;

            this.classList.add('flipped');

            if (!firstCard) {
                firstCard = this;
                return;
            }

            secondCard = this;
            moves++;
            document.getElementById('moves').innerText = moves;
            checkForMatch();
        }

        function checkForMatch() {
            let isMatch = firstCard.dataset.name === secondCard.dataset.name;

            if (isMatch) {
                disableCards();
                matchesFound++;
                document.getElementById('matches').innerText = matchesFound;
                firstCard.classList.add('matched');
                secondCard.classList.add('matched');

                if (matchesFound === images.length) {
                    setTimeout(showWin, 800);
                }
            } else {
                unflipCards();
            }
        }

        function disableCards() {
            firstCard.removeEventListener('click', flipCard);
            secondCard.removeEventListener('click', flipCard);
            resetBoard();
        }

        function unflipCards() {
            lockBoard = true;
            setTimeout(() => {
                firstCard.classList.remove('flipped');
                secondCard.classList.remove('flipped');
                resetBoard();
            }, 1000);
        }

        function resetBoard() {
            [firstCard, secondCard] = [null, null];
            lockBoard = false;
        }

        function showWin() {
            const winModal = document.getElementById('win-modal');
            winModal.style.display = 'flex';
            setTimeout(() => winModal.style.opacity = '1', 10);
            // Mostrar el mensaje de amor solicitado con efecto de escritura
            const loveMsg = document.getElementById('love-msg');
            if (loveMsg) {
                // Preparamos el HTML para el texto y el cursor
                loveMsg.innerHTML = '<span id="love-text"></span><span class="cursor">|</span>';
                loveMsg.style.display = 'block';

                const text = 'te amooooooo muchisimo mi amor, gracias por estar siempre conmigo en las buenas, en las malas, en las mejores y en las peores';
                typeText(document.getElementById('love-text'), text, 40, () => {
                    // Al terminar, ocultamos el cursor
                    const cursor = loveMsg.querySelector('.cursor');
                    if (cursor) cursor.style.display = 'none';
                });
            }
            startConfetti();
        }

        // Función para simular efecto de escritura
        function typeText(el, text, speed = 40, cb) {
            if (!el) { if (cb) cb(); return; }
            el.innerText = '';
            let i = 0;
            const timer = setInterval(() => {
                el.innerText += text.charAt(i);
                i++;
                if (i >= text.length) {
                    clearInterval(timer);
                    if (cb) cb();
                }
            }, speed);
        }

        function createFloatingHearts() {
            const container = document.getElementById('bg-hearts');
            for(let i=0; i<20; i++){
                let heart = document.createElement('div');
                heart.classList.add('heart-bg');
                heart.innerHTML = '❤️';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = Math.random() * 5 + 5 + 's';
                heart.style.fontSize = Math.random() * 20 + 10 + 'px';
                container.appendChild(heart);
            }
        }

        function startConfetti() {
            const canvas = document.getElementById('confetti');
            canvas.style.display = 'block';
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const pieces = [];
            const numberOfPieces = 200;
            const colors = ['#ff4757', '#2ed573', '#1e90ff', '#ffa502', '#ffffff'];

            for (let i = 0; i < numberOfPieces; i++) {
                pieces.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    rotation: Math.random() * 360,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    size: Math.random() * 10 + 5,
                    speed: Math.random() * 5 + 2
                });
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                pieces.forEach(p => {
                    ctx.fillStyle = p.color;
                    ctx.save();
                    ctx.translate(p.x, p.y);
                    ctx.rotate(p.rotation * Math.PI / 180);
                    ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
                    ctx.restore();

                    p.y += p.speed;
                    p.rotation += 2;
                    if (p.y > canvas.height) p.y = -10;
                });
                requestAnimationFrame(draw);
            }
            draw();
        }
    </script>
</body>
</html>